<!DOCTYPE html>
<html lang="hr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>24/7 Kopirnica</title>
  <link rel="stylesheet" href="/static/style.css" />
  <meta name="color-scheme" content="light" />
  <meta name="theme-color" content="#ffffff" />
</head>
<body class="kiosk">
  <header class="header">
    <div class="header-inner">
      <div class="brand">
        <svg class="logo" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <rect x="3" y="4" width="18" height="16" rx="2" fill="#3b82f6" opacity="0.85"/>
          <rect x="6" y="7" width="6" height="2" rx="1" fill="white"/>
          <rect x="6" y="11" width="12" height="2" rx="1" fill="white"/>
          <rect x="6" y="15" width="10" height="2" rx="1" fill="white"/>
        </svg>
        <span class="name">24/7 Kopirnica</span>
      </div>
    </div>
  </header>

  <div class="container center">
    <h1 class="kiosk-title">Dobro došli!</h1>
    <div class="card center">
      <img src="{{ qr_b64 }}" alt="QR" class="qr" />
      <div class="hint">Skenirajte QR kod ili otvorite:</div>
      <div class="link">{{ upload_url }}</div>
    </div>
    <ul class="steps">
      <li class="step">
        <svg viewBox="0 0 24 24" fill="none" stroke="#1d4ed8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <rect x="3" y="4" width="18" height="16" rx="2" fill="#bfdbfe" stroke="#1d4ed8"/>
          <path d="M8 12h8M8 8h5M8 16h6" stroke="#1d4ed8"/>
        </svg>
        <div>
          <div>1. Otvorite link</div>
          <div class="small muted">Skenirajte QR ili upišite adresu</div>
        </div>
      </li>
      <li class="step">
        <svg viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M3 15v4a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-4" stroke="#16a34a" fill="#bbf7d0"/>
          <path d="M7 10l5-5 5 5" stroke="#16a34a"/>
          <path d="M12 5v12" stroke="#16a34a"/>
        </svg>
        <div>
          <div>2. Prenesite datoteke</div>
          <div class="small muted">PDF, slike ili dokumenti</div>
        </div>
      </li>
      <li class="step">
        <svg viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <rect x="4" y="5" width="16" height="12" rx="2" fill="#fde68a" stroke="#f59e0b"/>
          <path d="M7 9h10M7 13h6" stroke="#f59e0b"/>
          <rect x="8" y="17" width="8" height="2" rx="1" fill="#f59e0b"/>
        </svg>
        <div>
          <div>3. Odaberite opcije i ispišite</div>
          <div class="small muted">Na ovom pultu</div>
        </div>
      </li>
    </ul>
  </div>

  <script>
    async function pollJob() {
      try {
        const res = await fetch('/check_job', { cache: 'no-cache' });
        const data = await res.json();
        if (data && data.status === 'ok' && data.job_id) {
          window.location.href = '/print/' + encodeURIComponent(data.job_id);
          return;
        }
      } catch (e) {
        // ignore
      }
      setTimeout(pollJob, 2000);
    }
    pollJob();
  </script>
</body>
<!-- Landing page shows large QR code and polls for job creation. -->
</html>
